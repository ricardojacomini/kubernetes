# playbooks/site.yml
---
# ğŸ‘‘ Initialize Control Plane
- name: " ğŸ› ï¸ Initialize Control Plane"
  hosts: master
  become: true
  gather_facts: true
  vars_files:
    - ../group_vars/main.yml
    - "../group_vars/{{ (ansible_distribution | lower).replace(' ', '_') }}.yml"
  tasks:
    - name: "Include Kubernetes Master Setup"
      import_role:
        name: kubernetes
        tasks_from: master.yml
      tags: [kubernetes]

# ğŸ§‘â€ğŸš€ Join Worker Nodes
- name: "ğŸ§‘â€ğŸš€ Join Worker Nodes"
  hosts: workers
  become: true
  gather_facts: true
  vars_files:
    - ../group_vars/main.yml
    - "../group_vars/{{ (ansible_distribution | lower).replace(' ', '_') }}.yml"
  tasks:
    - name: "Include Kubernetes Worker Setup"
      import_role:
        name: kubernetes
        tasks_from: worker.yml
      tags: [kubernetes]